<router-outlet></router-outlet>

@if (user) {
  <div class="container" style="max-width: 900px;">
    <div class="card profile-card border-0 shadow position-relative my-4 d-flex flex-column">
      <div class="circle-decoration circle-1"></div>
      <div class="circle-decoration circle-2"></div>
      <div class="circle-decoration circle-3"></div>

      <div class="card-body p-4 position-relative flex-grow-1">
        <div class="row align-items-start g-3">
          <div class="col-2">
            <img [src]="user.profileImage"
                 alt="User Profile Picture"
                 class="rounded-circle border border-4 border-white"
                 style="width: 120px; height: 120px; object-fit: cover;">
          </div>
          <div class="col-10">
            <div class="row">
              <div class="col-6">
                <h2 class="h2 fw-bold text-white mb-1">{{ user.name }}</h2>
                <p class="text-white mb-0">{{ user.location }}</p>
                <p class="text-white mb-0">{{ user.jobTitle }}</p>
              </div>
              @if (user.academicHistory && user.academicHistory.length > 0) {
                <div class="col-6">
                  <div class="mt-3">
                    @let latestCourse = user.academicHistory[user.academicHistory.length - 1];
                    <p class="text-white small mb-1">
                      <strong>{{ latestCourse.course.university.name }}</strong>
                    </p>
                    <p class="text-white small mb-0">{{ latestCourse.course.name }}</p>
                  </div>
                </div>
              }
            </div>
            <div class="d-flex gap-2 w-50 mt-3">
              <button
                class="btn btn-light rounded-pill px-3 py-1 fw-semibold btn-sm flex-grow-1"
                [routerLink]="['/profile', user.id, 'edit']">
                Edit Profile
              </button>
              <button class="btn btn-light rounded-pill px-3 py-1 fw-semibold btn-sm flex-grow-1">
                Message
              </button>
            </div>
          </div>
        </div>
        </div>

      </div>

    <div class="card border-0 shadow">
      <div class="card-body p-4">
        <h3 class="h5 fw-bold mb-3">Education</h3>

        @for (course of user.academicHistory; track course.id) {
          <div class="academic-item d-flex gap-3 pb-3 mb-3 border-bottom">
            <div class="flex-shrink-0">
              <div class="university-icon bg-light rounded d-flex align-items-center justify-content-center"
                   style="width: 48px; height: 48px;">
                <img [src]="course.course.university.logo"
                     alt="University Logo"
                     style="max-width: 48px; max-height: 48px; object-fit: contain;">
              </div>
            </div>

            <div class="flex-grow-1">
              <h5 class="fw-bold mb-0 fs-6">{{ course.course.university.name }}</h5>
              <p class="mb-0 fw-semibold">{{ course.course.name }}</p>
              <p class="text-muted mb-0 small">{{ course.course.area }}</p>
              <p class="text-muted small mb-0">
                {{ course.startDate | date:'MMM yyyy' }} - {{ course.endDate | date:'MMM yyyy' }}
              </p>
            </div>
          </div>
        }
      </div>
    </div>
  </div>
}
